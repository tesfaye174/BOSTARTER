<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relazione Progetto BOSTARTER</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
        }
        .section-title {
            border-bottom: 3px solid #667eea;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
            color: #667eea;
        }
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 0.375rem;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            overflow-x: auto;
        }
        .entity-diagram {
            background: #f8f9fa;
            border: 2px solid #667eea;
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1rem 0;
            font-family: monospace;
        }
        .table-responsive {
            margin: 1rem 0;
        }
        .alert-info {
            background: #d1ecf1;
            border-color: #bee5eb;
            color: #0c5460;
        }
        .page-break {
            page-break-before: always;
        }
        @media print {
            body { font-size: 12px; }
            .header { background: #667eea !important; -webkit-print-color-adjust: exact; }
            .no-print { display: none; }
        }
    </style>
</head>
<body>

<div class="header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <h1 class="display-4"><i class="fas fa-rocket"></i> BOSTARTER</h1>
                <p class="lead">Piattaforma di Crowdfunding per Progetti Hardware/Software</p>
            </div>
            <div class="col-lg-4 text-end">
                <h5>Corso di Basi di Dati</h5>
                <p>CdS Informatica per il Management<br>A.A. 2024/2025</p>
            </div>
        </div>
    </div>
</div>

<div class="container">

<!-- Indice -->
<div class="row mb-5">
    <div class="col-12">
        <h2 class="section-title"><i class="fas fa-list"></i> Indice</h2>
        <div class="row">
            <div class="col-md-6">
                <ol>
                    <li><a href="#requisiti">Raccolta e Analisi dei Requisiti</a></li>
                    <li><a href="#concettuale">Progettazione Concettuale</a></li>
                    <li><a href="#logica">Progettazione Logica</a></li>
                    <li><a href="#normalizzazione">Normalizzazione</a></li>
                    <li><a href="#web">Funzionalità Applicazione Web</a></li>
                </ol>
            </div>
            <div class="col-md-6">
                <ol start="6">
                    <li><a href="#demo">Demo e Presentazione</a></li>
                    <li><a href="#appendice">Appendice: Codice SQL</a></li>
                </ol>
            </div>
        </div>
    </div>
</div>

<!-- 1. Raccolta e Analisi dei Requisiti -->
<section id="requisiti" class="mb-5">
    <h2 class="section-title"><i class="fas fa-search"></i> 1. Raccolta e Analisi dei Requisiti</h2>

    <h3>1.1 Specifiche sui Dati</h3>
    <div class="alert alert-info">
        <strong>Entità Principali:</strong>
        <ul>
            <li><strong>Utenti:</strong> email (univoca), nickname, password, nome, cognome, anno nascita, luogo nascita</li>
            <li><strong>Competenze:</strong> nome, descrizione, categoria</li>
            <li><strong>Skill Curriculum:</strong> competenza + livello (0-5)</li>
            <li><strong>Progetti:</strong> nome univoco, descrizione, data inserimento, budget, data limite, stato</li>
            <li><strong>Reward:</strong> codice univoco, descrizione, foto</li>
            <li><strong>Finanziamenti:</strong> importo, data</li>
            <li><strong>Commenti:</strong> id univoco, data, testo</li>
            <li><strong>Candidature:</strong> profilo richiesto, skill matching</li>
            <li><strong>Eventi:</strong> log attività (MongoDB)</li>
        </ul>
    </div>

    <h3>1.2 Lista delle Operazioni</h3>
    <div class="row">
        <div class="col-md-6">
            <h4>Operazioni Generali (Tutti gli Utenti):</h4>
            <ol>
                <li>Autenticazione/registrazione</li>
                <li>Inserimento skill curriculum</li>
                <li>Visualizzazione progetti</li>
                <li>Finanziamento progetti</li>
                <li>Scelta della reward</li>
                <li>Inserimento commenti</li>
                <li>Inserimento candidature</li>
            </ol>
        </div>
        <div class="col-md-6">
            <h4>Operazioni Specializzate:</h4>
            <ol start="8">
                <li><strong>Admin:</strong> Inserimento competenze</li>
                <li><strong>Creatori:</strong> Creazione progetti</li>
                <li><strong>Creatori:</strong> Inserimento reward</li>
                <li><strong>Creatori:</strong> Risposta commenti</li>
                <li><strong>Creatori:</strong> Inserimento profili SW</li>
                <li><strong>Creatori:</strong> Accettazione candidature</li>
            </ol>
        </div>
    </div>

    <h3>1.3 Tavola dei Volumi</h3>
    <div class="table-responsive">
        <table class="table table-bordered">
            <thead class="table-dark">
                <tr>
                    <th>Operazione</th>
                    <th>Tipo</th>
                    <th>Frequenza</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Nuovo progetto</td>
                    <td>Interattiva</td>
                    <td>1/mese</td>
                </tr>
                <tr>
                    <td>Visualizzazione progetti + finanziamenti</td>
                    <td>Batch</td>
                    <td>1/mese</td>
                </tr>
                <tr>
                    <td>Conteggio progetti per utente</td>
                    <td>Batch</td>
                    <td>3/mese</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="alert alert-success">
        <strong>Parametri analisi ridondanza #nr_progetti:</strong><br>
        wI = 1, wB = 0.5, a = 2<br>
        <strong>Costo = (1 × 1) + (0.5 × 3) + 2 = 4.5</strong>
    </div>
</section>

<!-- 2. Progettazione Concettuale -->
<section id="concettuale" class="mb-5">
    <h2 class="section-title"><i class="fas fa-project-diagram"></i> 2. Progettazione Concettuale</h2>

    <h3>2.1 Diagramma E-R</h3>
    <div class="entity-diagram">
        <pre>
┌─────────────────┐       ┌─────────────────┐
│     UTENTE      │       │   COMPETENZA    │
├─────────────────┤       ├─────────────────┤
│ email (PK)      │◄────┐ │ nome (PK)       │
│ nickname        │     │ ├─────────────────┤
│ password        │     │ │ descrizione     │
│ nome            │     │ │ categoria       │
│ cognome         │     │ └─────────────────┘
│ tipo_utente     │     │          ▲
│ codice_sicurezza│     │          │
│ nr_progetti     │     │ ┌─────────────────┐
│ affidabilita    │     │ │   SKILL_USER    │
└─────────────────┘     │ ├─────────────────┤
          ▲             │ │ utente_email (FK)│
          │             │ │ competenza (FK)  │
          │             │ │ livello (0-5)    │
          │             └─────────────────┘
          │                      ▲
          │                      │
┌─────────────────┐       ┌─────────────────┐
│    PROGETTO     │       │   CATEGORIA     │
├─────────────────┤       ├─────────────────┤
│ id (PK)         │       │ progetto_id (FK)│
│ titolo          │       │ tipo (HW/SW)    │
│ descrizione     │       └─────────────────┘
│ creatore_email  │                ▲
│ budget_richiesto│                │
│ data_limite     │       ┌─────────────────┐
│ stato           │       │   COMPONENTE    │
└─────────────────┘       ├─────────────────┤
          ▲               │ id (PK)         │
          │               │ progetto_id (FK)│
          │               │ nome            │
          │               │ descrizione     │
          │               │ prezzo          │
          │               │ quantita        │
          └─────────────────┘

          │
          ▼
┌─────────────────┐       ┌─────────────────┐
│    REWARD       │       │  FINANZIAMENTO │
├─────────────────┤       ├─────────────────┤
│ id (PK)         │◄────┐ │ id (PK)         │
│ progetto_id (FK)│     │ ├─────────────────┤
│ descrizione     │     │ │ utente_email (FK│
│ foto            │     │ │ progetto_id (FK)│
└─────────────────┘     │ │ importo         │
                        │ │ data            │
                        │ │ reward_id (FK)  │
                        └─────────────────┘

┌─────────────────┐       ┌─────────────────┐
│    COMMENTO     │       │   CANDIDATURA   │
├─────────────────┤       ├─────────────────┤
│ id (PK)         │       │ id (PK)         │
│ progetto_id (FK)│       │ utente_email (FK│
│ utente_email (FK│       │ profilo_id (FK) │
│ testo           │       │ stato           │
│ data            │       └─────────────────┘
│ risposta        │
└─────────────────┘
        </pre>
    </div>

    <h3>2.2 Dizionario delle Entità</h3>
    <div class="row">
        <div class="col-md-6">
            <h4>UTENTE</h4>
            <ul>
                <li><strong>email:</strong> VARCHAR(255), PK, UNIQUE</li>
                <li><strong>nickname:</strong> VARCHAR(50)</li>
                <li><strong>tipo_utente:</strong> ENUM('base', 'creatore', 'amministratore')</li>
                <li><strong>affidabilita:</strong> DECIMAL(5,2)</li>
            </ul>
        </div>
        <div class="col-md-6">
            <h4>PROGETTO</h4>
            <ul>
                <li><strong>id:</strong> INT, PK, AUTO_INCREMENT</li>
                <li><strong>titolo:</strong> VARCHAR(255), UNIQUE</li>
                <li><strong>budget_richiesto:</strong> DECIMAL(10,2)</li>
                <li><strong>stato:</strong> ENUM('aperto', 'chiuso')</li>
            </ul>
        </div>
    </div>

    <h3>2.3 Business Rules</h3>
    <div class="alert alert-warning">
        <ol>
            <li><strong>Progetto Chiusura:</strong> Stato = 'chiuso' quando budget raggiunto OPPURE data_limite superata</li>
            <li><strong>Affidabilità:</strong> % progetti creati che hanno ricevuto almeno un finanziamento</li>
            <li><strong>Skill Matching:</strong> Candidatura possibile solo se ∀ skill richieste: livello_utente ≥ livello_richiesto</li>
            <li><strong>Commenti:</strong> Max 1 risposta da creatore per commento</li>
        </ol>
    </div>
</section>

<!-- 3. Progettazione Logica -->
<section id="logica" class="mb-5">
    <h2 class="section-title"><i class="fas fa-database"></i> 3. Progettazione Logica</h2>

    <h3>3.1 Schema Relazionale</h3>
    <div class="code-block">
CREATE TABLE utenti (
    id INT PRIMARY KEY AUTO_INCREMENT,
    email VARCHAR(255) UNIQUE NOT NULL,
    nickname VARCHAR(50) NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    nome VARCHAR(100) NOT NULL,
    cognome VARCHAR(100) NOT NULL,
    tipo_utente ENUM('base', 'creatore', 'amministratore') DEFAULT 'base',
    codice_sicurezza VARCHAR(20),
    nr_progetti INT DEFAULT 0,
    affidabilita DECIMAL(5,2) DEFAULT 0.00,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
    </div>

    <h3>3.2 Vincoli di Integrità</h3>
    <div class="row">
        <div class="col-md-6">
            <h4>Chiavi Primarie</h4>
            <ul>
                <li>utenti.id</li>
                <li>progetti.id</li>
                <li>competenze.nome</li>
                <li>skill_user.(utente_id, competenza)</li>
            </ul>
        </div>
        <div class="col-md-6">
            <h4>Vincoli di Dominio</h4>
            <ul>
                <li>livello ∈ [0,5]</li>
                <li>stato ∈ {'aperto', 'chiuso'}</li>
                <li>tipo_utente ∈ {'base', 'creatore', 'amministratore'}</li>
                <li>importo > 0</li>
            </ul>
        </div>
    </div>

    <h3>3.3 Analisi delle Ridondanze</h3>
    <div class="alert alert-success">
        <h4><i class="fas fa-balance-scale"></i> Campo nr_progetti (Ridondanza Concettuale)</h4>
        <strong>Vantaggi:</strong>
        <ul>
            <li>Query efficienti per statistiche creatori</li>
            <li>Riduce JOIN per conteggi frequenti</li>
        </ul>
        <strong>Decisione:</strong> <span class="badge bg-success">MANTIENI ridondanza</span> per performance
    </div>
</section>

<!-- 4. Normalizzazione -->
<section id="normalizzazione" class="mb-5">
    <h2 class="section-title"><i class="fas fa-check-circle"></i> 4. Normalizzazione</h2>

    <div class="table-responsive">
        <table class="table table-bordered">
            <thead class="table-dark">
                <tr>
                    <th>Forma Normale</th>
                    <th>Stato</th>
                    <th>Motivazione</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1FN</td>
                    <td><span class="badge bg-success">✅ Soddisfatta</span></td>
                    <td>Attributi atomici</td>
                </tr>
                <tr>
                    <td>2FN</td>
                    <td><span class="badge bg-success">✅ Soddisfatta</span></td>
                    <td>No dipendenze parziali</td>
                </tr>
                <tr>
                    <td>3FN</td>
                    <td><span class="badge bg-success">✅ Soddisfatta</span></td>
                    <td>No dipendenze transitive</td>
                </tr>
                <tr>
                    <td>BCNF</td>
                    <td><span class="badge bg-success">✅ Soddisfatta</span></td>
                    <td>Determinanti sono chiavi</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="alert alert-info">
        <strong>✅ Schema completamente normalizzato al livello BCNF</strong>
    </div>
</section>

<!-- 5. Funzionalità Web -->
<section id="web" class="mb-5">
    <h2 class="section-title"><i class="fas fa-globe"></i> 5. Funzionalità Applicazione Web</h2>

    <h3>5.1 Architettura Tecnologica</h3>
    <div class="row text-center mb-4">
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-body">
                    <i class="fas fa-code fa-3x text-primary mb-3"></i>
                    <h5>Frontend</h5>
                    <p>PHP + Bootstrap<br>JavaScript<br>Responsive Design</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-body">
                    <i class="fas fa-server fa-3x text-success mb-3"></i>
                    <h5>Backend</h5>
                    <p>PHP API<br>JWT Auth<br>CSRF Protection</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-body">
                    <i class="fas fa-database fa-3x text-warning mb-3"></i>
                    <h5>Database</h5>
                    <p>MySQL<br>Stored Procedures<br>Triggers</p>
                </div>
            </div>
        </div>
    </div>

    <h3>5.2 Moduli Principali</h3>
    <div class="row">
        <div class="col-md-6">
            <h4><i class="fas fa-shield-alt"></i> Sicurezza</h4>
            <ul>
                <li>Password hashing Argon2ID</li>
                <li>Rate limiting tentativi</li>
                <li>CSRF protection</li>
                <li>Input sanitization</li>
                <li>SQL injection prevention</li>
            </ul>
        </div>
        <div class="col-md-6">
            <h4><i class="fas fa-project-diagram"></i> Funzionalità Core</h4>
            <ul>
                <li>Gestione progetti HW/SW</li>
                <li>Sistema finanziamenti</li>
                <li>Commenti e risposte</li>
                <li>Candidature skill-based</li>
                <li>Dashboard analytics</li>
            </ul>
        </div>
    </div>

    <h3>5.3 API REST Endpoints</h3>
    <div class="table-responsive">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Endpoint</th>
                    <th>Metodo</th>
                    <th>Descrizione</th>
                    <th>Autenticazione</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>/api/login</code></td>
                    <td><span class="badge bg-primary">POST</span></td>
                    <td>Autenticazione utente</td>
                    <td>No</td>
                </tr>
                <tr>
                    <td><code>/api/progetti</code></td>
                    <td><span class="badge bg-success">GET</span></td>
                    <td>Lista progetti</td>
                    <td>Optional</td>
                </tr>
                <tr>
                    <td><code>/api/finanziamenti</code></td>
                    <td><span class="badge bg-primary">POST</span></td>
                    <td>Nuovo finanziamento</td>
                    <td>Sì</td>
                </tr>
                <tr>
                    <td><code>/api/commenti</code></td>
                    <td><span class="badge bg-primary">POST</span></td>
                    <td>Nuovo commento</td>
                    <td>Sì</td>
                </tr>
            </tbody>
        </table>
    </div>
</section>

<!-- 6. Demo e Presentazione -->
<section id="demo" class="mb-5">
    <h2 class="section-title"><i class="fas fa-play-circle"></i> 6. Demo e Presentazione</h2>

    <h3>6.1 Scenari di Test</h3>
    <div class="row">
        <div class="col-md-4 mb-3">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="fas fa-user-plus"></i> Scenario 1</h5>
                </div>
                <div class="card-body">
                    <strong>Registrazione e Creazione</strong>
                    <ol class="mt-2">
                        <li>Registrazione creatore</li>
                        <li>Aggiunta skill</li>
                        <li>Creazione progetto</li>
                        <li>Setup reward</li>
                    </ol>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-3">
            <div class="card">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="fas fa-euro-sign"></i> Scenario 2</h5>
                </div>
                <div class="card-body">
                    <strong>Finanziamento</strong>
                    <ol class="mt-2">
                        <li>Visualizza progetti</li>
                        <li>Seleziona progetto</li>
                        <li>Scegli reward</li>
                        <li>Pagamento simulato</li>
                    </ol>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-3">
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="fas fa-comments"></i> Scenario 3</h5>
                </div>
                <div class="card-body">
                    <strong>Interazione Sociale</strong>
                    <ol class="mt-2">
                        <li>Lascia commento</li>
                        <li>Risposta creatore</li>
                        <li>Like/dislike</li>
                        <li>Moderazione</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <h3>6.2 Metriche Piattaforma</h3>
    <div class="row text-center">
        <div class="col-md-3">
            <div class="card">
                <div class="card-body">
                    <h3 class="text-primary"><i class="fas fa-users"></i></h3>
                    <h5>Utenti</h5>
                    <p>Registrati attivi</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card">
                <div class="card-body">
                    <h3 class="text-success"><i class="fas fa-project-diagram"></i></h3>
                    <h5>Progetti</h5>
                    <p>Attivi/totali</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card">
                <div class="card-body">
                    <h3 class="text-warning"><i class="fas fa-euro-sign"></i></h3>
                    <h5>Finanziato</h5>
                    <p>Volume totale</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card">
                <div class="card-body">
                    <h3 class="text-info"><i class="fas fa-star"></i></h3>
                    <h5>Affidabilità</h5>
                    <p>Media creatori</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Appendice -->
<section id="appendice">
    <h2 class="section-title"><i class="fas fa-code"></i> Appendice: Codice SQL Completo</h2>

    <div class="alert alert-warning">
        <strong>Nota:</strong> Il codice SQL completo è disponibile nel file allegato <code>schema_bostarter_italiano.sql</code>
    </div>

    <h3>A.1 Schema Database Principale</h3>
    <div class="code-block">
CREATE TABLE utenti (
    id INT PRIMARY KEY AUTO_INCREMENT,
    email VARCHAR(255) UNIQUE NOT NULL,
    nickname VARCHAR(50) NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    nome VARCHAR(100) NOT NULL,
    cognome VARCHAR(100) NOT NULL,
    tipo_utente ENUM('base', 'creatore', 'amministratore') DEFAULT 'base',
    codice_sicurezza VARCHAR(20),
    nr_progetti INT DEFAULT 0,
    affidabilita DECIMAL(5,2) DEFAULT 0.00,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
    </div>

    <h3>A.2 Stored Procedure Esempio</h3>
    <div class="code-block">
CREATE PROCEDURE autentica_utente(
    IN p_email VARCHAR(255),
    IN p_password VARCHAR(255)
)
BEGIN
    DECLARE user_id INT;
    DECLARE stored_hash VARCHAR(255);

    SELECT id, password_hash INTO user_id, stored_hash
    FROM utenti
    WHERE email = p_email;

    IF user_id IS NULL THEN
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Email o password non validi';
    END IF;

    IF NOT CHECK_PASSWORD(p_password, stored_hash) THEN
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Email o password non validi';
    END IF;

    SELECT id, email, nickname, nome, cognome, tipo_utente
    FROM utenti WHERE id = user_id;
END
    </div>

    <h3>A.3 Trigger Esempio</h3>
    <div class="code-block">
CREATE TRIGGER aggiorna_affidabilita_creatore
AFTER INSERT ON finanziamenti
FOR EACH ROW
BEGIN
    DECLARE progetti_totali INT DEFAULT 0;
    DECLARE progetti_finanziati INT DEFAULT 0;

    SELECT COUNT(*) INTO progetti_totali
    FROM progetti WHERE creatore_id = (SELECT creatore_id FROM progetti WHERE id = NEW.progetto_id);

    SELECT COUNT(DISTINCT p.id) INTO progetti_finanziati
    FROM progetti p JOIN finanziamenti f ON p.id = f.progetto_id
    WHERE p.creatore_id = (SELECT creatore_id FROM progetti WHERE id = NEW.progetto_id);

    IF progetti_totali > 0 THEN
        UPDATE utenti SET affidabilita = ROUND((progetti_finanziati / progetti_totali) * 100, 2)
        WHERE id = (SELECT creatore_id FROM progetti WHERE id = NEW.progetto_id);
    END IF;
END
    </div>
</section>

</div>

<!-- Footer -->
<footer class="bg-dark text-white mt-5 py-4">
    <div class="container text-center">
        <h5>🎉 BOSTARTER - Progetto Completato</h5>
        <p>Tecnologie: PHP, MySQL, Bootstrap, JavaScript</p>
        <p class="mb-0">Sviluppato per il Corso di Basi di Dati A.A. 2024/2025</p>
        <hr class="my-3">
        <p class="mb-0"><small>Per stampare questo documento in PDF, utilizzare Ctrl+P nel browser</small></p>
    </div>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
